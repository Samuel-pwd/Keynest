{% extends 'base.html' %}
{% block title %}Reset Password{% endblock %}

{% block content %}
<form method="POST" action="">
  {{ form.hidden_tag() }}

  <div class="form-group password-wrapper">
    {{ form.password(class="form-input", placeholder="New Password", id="password") }}
    <span class="toggle-password" onclick="toggleVisibility('password', this)">👁️</span>
    {% for error in form.password.errors %}
      <span class="error-message">{{ error }}</span>
    {% endfor %}
  </div>

  <div class="form-group password-wrapper">
    {{ form.confirm_password(class="form-input", placeholder="Confirm Password", id="confirm_password") }}
    <span class="toggle-password" onclick="toggleVisibility('confirm_password', this)">👁️</span>
    {% for error in form.confirm_password.errors %}
      <span class="error-message">{{ error }}</span>
    {% endfor %}
  </div>

  {{ form.submit(class="auth-btn") }}

  <div class="links">
    <p>Go back to <a href="{{ url_for('main.login') }}">Login</a></p>
  </div>
</form>

<script>
  function toggleVisibility(fieldId, iconElement) {
    const field = document.getElementById(fieldId);
    const isPassword = field.type === 'password';
    field.type = isPassword ? 'text' : 'password';
    iconElement.textContent = isPassword ? '🙈' : '👁️';
  }
</script>
{% endblock %}
